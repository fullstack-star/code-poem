<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ä»£ç æ—¥è®°</title>
</head>
<script>
    /**
     * created by zhangyi on 2019å¹´06æœˆ22æ—¥
     */
    const DATE = "2019å¹´6æœˆ21æ—¥",
        WEATHER = "é›¨å¤©",
        LOCATION = "è¥¿å®‰";
    const TIME_NODE = {
        LUNCH: "12:00",
        DINNER: "19:00",
        SLEEP: "23:30"
    };

    var myEmotion = "I'm fine ğŸ™‚,just lonely.";
    var pollingId;
    var VehicleFactory = function (type, ...content) {
        if (this instanceof VehicleFactory) {
            return this[type].apply(this,content);
        } else {
            return new VehicleFactory(type, content);
        }
    }
    VehicleFactory.prototype = {
        _aToB: function (type, from, to) {
            console.log(`ä»${from}åˆ°${to} ${type}`);
        },
        walk: function (from, to, time) {
            this._aToB("æ­¥è¡Œ", from, to);
            console.log(`ç”¨æ—¶ ${time}.`);
        },
        bike: function (from, to, time) {
            this._aToB("éª‘è‡ªè¡Œè½¦", from, to);
            console.log(`ç”¨æ—¶ ${time}.`);
        },
        bus: function (from, to, time, cost) {
            this._aToB("åå…¬äº¤è½¦", from, to);
            console.log(`ç”¨æ—¶ ${time},èŠ±äº† ${cost}.`);
        },
        subway: function (from, to, time, cost) {
            this._aToB("ä¹˜ååœ°é“", from, to);
            console.log(`ç”¨æ—¶ ${time},èŠ±äº†${cost}.`);
        }
    }

    /**
     * åƒé¥­
     */
    var eatMeal = function (type, cost) {
        console.log(`åƒ ${type}ï¼ŒèŠ±äº† ${cost}ã€‚`)
    }

    /**
     * æ¯éš”10åˆ†é’Ÿcheckä¸€éæ—¶é—´ï¼Œåˆ°äº†ç¡è§‰æ—¶é—´å°±ç¡è§‰ï¼Œå¦åˆ™ç»§ç»­çœ‹ã€‚
     * @param {*} name ä¹¦å
     */
    var readBook = function (name) {
        var now = timeFormat();
        if (now < TIME_NODE.SLEEP)
            console.log(`è¿˜ä¸åˆ°ç¡è§‰æ—¶é—´ï¼Œçœ‹ä¼šä¹¦ ${name},`)
        else
            fallAsleep();
    }

    /**
     * å†™ä»£ç 
     */
    var coding = function () {
        console.log("ä¸€æ¯èŒ¶ï¼Œä¸€åŒ…çƒŸï¼Œä¸€è¡Œä»£ç å†™ä¸€å¤©ğŸ™‚ã€‚")
    }

    /**
     * ç¡è§‰
     */
    var fallAsleep = function () {
        pollingId && clearTimeout(pollingId);
        console.log("åˆ°ç¡è§‰æ—¶é—´å•¦ï¼Œnice dream~");
    }

    function polling(fn, time, content) {
        pollingId = setTimeout(function run() {
            fn.call(null, content);
            pollingId = setTimeout(run, time);
        }, time);
    }

    /**
     * æ ¼å¼åŒ–æ—¶é—´ï¼Œè¾“å‡ºhh:mmæ ¼å¼
     * @param {*} date 
     */
    function timeFormat(date) {
        if (!(date instanceof Date)) date = new Date();
        var time = {};
        time.Hour = date.getHours();
        time.Thour = time.Hour < 10 ? '0' + time.Hour : String(time.Hour);
        time.Minute = date.getMinutes();
        time.TMinute = time.Minute < 10 ? '0' + time.Minute : String(time.Minute);
        return time.Thour + ":" + time.TMinute;
    }

    (function printDairy() {
        console.log(`ä»Šå¤©æ˜¯${DATE}ï¼Œ${LOCATION}ä»Šå¤©æ˜¯${WEATHER}ï¼Œ${myEmotion}`);
        new VehicleFactory('walk','å®¶é‡Œ', 'åœ°é“ç«™', '5åˆ†é’Ÿ');
        new VehicleFactory('subway','åœ°é“ç«™', 'å…¬äº¤ç«™', '15åˆ†é’Ÿ', "3å—é’±");
        new VehicleFactory('bus','å…¬äº¤ç«™', 'å…¬å¸', '10åˆ†é’Ÿ','1å—é’±');
        eatMeal('æ—©é¥­','5å—é’±');
        console.log('åƒå®Œæ—©é¥­å·²ç»9ç‚¹äº†ï¼Œå¼€å§‹å·¥ä½œ~');
        coding();
        console.log('12ç‚¹ä¸åŒäº‹å‡ºå»åƒé¥­~');
        new VehicleFactory('bike','å…¬å¸', 'ç¾é£ŸåŸ', '5åˆ†é’Ÿ');
        eatMeal('åˆé¥­','12å—é’±');
        console.log('åƒå®Œåˆé¥­å›æ¥çœ¯ä¸€ä¼šï¼Œä¸€ç‚¹åŠèµ·æ¥å·¥ä½œ~');
        coding();
        console.log('7ç‚¹å‡ºå»åƒæ™šé¥­ï¼Œä»Šå¤©åˆè¦åŠ ç­~');
        eatMeal('æ™šé¥­','15å—é’±');
        console.log('åŠ ç­å›åˆ°å®¶10ç‚¹')
        polling(readBook,3000,'ã€Šæœ€æ€•ä½ ä¸€ç”Ÿç¢Œç¢Œæ— ä¸ºï¼Œè¿˜å®‰æ…°è‡ªå·±å¹³å‡¡å¯è´µã€‹')
    })()
</script>

</body>

<body>


</html>